<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>starfield by adnan (taken from REZ)</title>
		<style type="text/css">
			body  {margin:0;padding:0;background-color:#000000;font-size:0;overflow:hidden}
			div   {margin:0;padding:0;position:absolute;font-size:0;overflow:hidden}
			canvas{background-color:#000000;overflow:hidden}
		</style>
		<script>
			// width, height, x y and z coords
			var w, h, x, y, z;
			var n = 512;
			var star = new Array(n);
			var star_speed = 4;
			var star_ratio = 256;
			var fps = 0;
			var context;

			function init() {
				for (var i=0; i<n; ++i) {
					star[i] = new Array(5);
					star[i][0] = Math.random()*w*2-x*2;
					star[i][1] = Math.random()*h*2-y*2;
					star[i][2] = Math.random(Math.random()*z);
					star[i][3] = 0;
					star[i][4] = 0;
				}
				var starfield = document.getElementById('starfield');
				starfield.style.position = 'absolute';
				starfield.width = w;
				starfield.height = h;
				context = starfield.getContext('2d');
				context.fillStyle='rgb(0,0,0)';
				context.strokeStyle='rgb(255,255,255)';
			}
			function anim() {
				mouse_x = 25-x;
				mouse_y = 25-y;
				context.fillRect(0, 0, w, h);
				for (var i=0; i<n; i++) {
					test = true;
					star_x_save = star[i][3];
					star_y_save = star[i][4];
					
					star[i][0] += mouse_x>>4;
					if (star[i][0] > x<<1) { star[i][0] -= w<<1; test = false; }
					if (star[i][0] < -x<<1) { star[i][0] += w<<1; test = false; }

					star[i][1] += mouse_y>>4;
					if (star[i][1] > y<<1) { star[i][1] -= h<<1; test = false; }
					if (star[i][1] < -y<<1) { star[i][1] += h<<1; test = false; }

					star[i][2] -= star_speed;
					if (star[i][2] > z) { star[i][2] -= z; test = false; }
					if (star[i][2] < 0) { star[i][2] += z; test = false; }

					star[i][3] = x + (star[i][0]/star[i][2]) * star_ratio;
					star[i][4] = y + (star[i][1]/star[i][2]) * star_ratio;

					if (star_x_save > 0 && star_x_save < w && star_y_save > 0 && star_y_save < h && test) {
						context.lineWidth = (1 - star_color_ratio * star[i][2]) * 2;
						context.beginPath();
						context.moveTo(star_x_save, star_y_save);
						context.lineTo(star[i][3], star[i][4]);
						context.stroke();
						context.closePath();
					}
				}
				timeout = setTimeout('anim()', fps);
			}
			function get_screen_size() {
				var w = document.documentElement.clientWidth;
				var h = document.documentElement.clientHeight;
				return Array(w, h);
			}		
			function resize() {
				w = get_screen_size()[0];
				h = get_screen_size()[1];
				x = Math.round(w/2);
				y = Math.round(h/2);
				z = (w+h)/2;
				star_color_ratio = 1/z;
				// cursor_x = x;
				// cursor_y = y;
				init();
			}
			function start() {
				init();
				anim();
			}
		</script>
	</head>
	<body onload="start()">
		<canvas id="starfield" style="background-color:#000"></canvas>
	</body>
</html>
